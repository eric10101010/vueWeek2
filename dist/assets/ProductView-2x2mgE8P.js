import{_ as P,o,c as d,b as t,F as p,e as _,t as c,r as b,a as l,f,g}from"./index-0_amUPKX.js";const v={props:["tempProduct"]},y={class:"container"},w={class:"row"},x={class:"col-md-6"},V=t("h2",{class:"mb-3"},"單一產品細節",-1),E={class:"card mb-3"},T=["src","alt"],L={class:"card-body"},A={class:"card-title"},D={class:"badge bg-primary ms-2"},I={class:"card-text"},C={class:"card-text"},U={class:"d-flex"},B={class:"card-text me-2"},M={class:"card-text text-secondary"},S={class:"row"},N=["src","alt"],R={key:1,class:"text-secondary"};function F(e,n,s,k,a,h){return o(),d("div",y,[t("div",w,[t("div",x,[V,s.tempProduct.title?(o(),d(p,{key:0},[t("div",E,[t("img",{src:s.tempProduct.imageUrl,class:"card-img-top mb-3",alt:e.主圖},null,8,T),t("div",L,[t("h5",A,[_(c(s.tempProduct.title)+" ",1),t("span",D,c(s.tempProduct.category),1)]),t("p",I,"商品描述："+c(s.tempProduct.description),1),t("p",C,"商品內容："+c(s.tempProduct.content),1),t("div",U,[t("p",B,c(s.tempProduct.price),1),t("p",M,[t("del",null,c(s.tempProduct.origin_price),1)]),_(" 元 / "+c(s.tempProduct.unit),1)])])]),t("div",S,[(o(!0),d(p,null,b(s.tempProduct.imagesUrl,r=>(o(),d("div",{class:"col-4 g-3",key:r},[t("img",{src:r,alt:r,class:"img-fluid object-fit-cover"},null,8,N)]))),128))])],64)):(o(),d("p",R,"請選擇一個商品查看"))])])])}const H=P(v,[["render",F]]);var O={VITE_API:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"milk_tea",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:u,VITE_PATH:m}=O,j={data(){return{productsList:[],tempProduct:{}}},methods:{checkUser(){var n;const e=(n=document.cookie.split("; ").find(s=>s.startsWith("hexToken=")))==null?void 0:n.split("=")[1];l.defaults.headers.common.Authorization=e,l.post(`${u}/api/user/check`,null).then(()=>{this.getProducts()}).catch(s=>{console.dir(s)})},getProducts(){l.get(`${u}/api/${m}/admin/products`).then(e=>{this.productsList=e.data.products}).catch(e=>{console.dir(e.response.data)})},checkDetail(e){this.tempProduct={...e}},delProduct(e){l.delete(`${u}/api/${m}/admin/product/${e}`).then(n=>{this.productsList=n.data.products,alert("產品已成功被刪除"),this.getProducts()}).catch(n=>{alert("刪除產品失敗"),console.dir(n)})}},mounted(){this.checkUser()},components:{ProductModal:H}},z={class:"container mt-3"},W={class:"row py-3"},q={class:"col-md-10"},G=t("h2",{class:"py-3"},"產品列表",-1),J={class:"table table-hover mt-4"},K=t("thead",null,[t("tr",null,[t("th",{width:"150"},"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"150"},"是否啟用"),t("th",{width:"120"},"查看細節"),t("th",{width:"80"},"刪除產品")])],-1),Q={width:"150"},X={width:"120"},Y={width:"120"},Z={width:"150"},tt={key:0,class:"text-success"},st={key:1},et={width:"120"},ct=["onClick"],ot={width:"80"},dt=["onClick"],nt={class:"text-success"};function it(e,n,s,k,a,h){const r=f("ProductModal");return o(),d("div",z,[t("div",W,[t("div",q,[G,t("table",J,[K,t("tbody",null,[(o(!0),d(p,null,b(a.productsList,i=>(o(),d("tr",{key:i.id},[t("td",Q,c(i.title),1),t("td",X,c(i.origin_price),1),t("td",Y,c(i.price),1),t("td",Z,[i.is_enabled?(o(),d("span",tt,"啟用")):(o(),d("span",st,"未啟用"))]),t("td",et,[t("button",{type:"button",class:"btn btn-primary",onClick:$=>h.checkDetail(i)}," 查看細節 ",8,ct)]),t("td",ot,[t("button",{type:"button",class:"btn btn-danger",onClick:$=>h.delProduct(i.id)}," 刪除 ",8,dt)])]))),128))])]),t("p",null,[_("目前有 "),t("span",nt,c(a.productsList.length),1),_(" 項產品")]),g(r,{tempProduct:a.tempProduct},null,8,["tempProduct"])])])])}const at=P(j,[["render",it]]);export{at as default};
